@{
    ViewBag.Title = "Trang chủ";
    W_GJS.Models.GJSEntities gjs = new W_GJS.Models.GJSEntities();
    List<W_GJS.Models.O_PRODUCT_NEW> listproduct_new = gjs.O_PRODUCT_NEW.ToList();
    List<W_GJS.Models.O_PRODUCT_HIGHLIGHTS> listproduct_hightlights = gjs.O_PRODUCT_HIGHLIGHTS.ToList();
    List<W_GJS.Models.O_PRODUCT_SELLING> listproduct_selling = gjs.O_PRODUCT_SELLING.ToList();
    List<W_GJS.Models.O_PRODUCT> listproduct = gjs.O_PRODUCT.Where(t => t.ACTIVE == true).ToList().Skip(0).Take(21).ToList();
    List<W_GJS.Models.O_CATEGORY_PRODUCT> listcategory = gjs.O_CATEGORY_PRODUCT.Where(t => t.ACTIVE == true).ToList();
}

@section Slide {
    @Html.Partial("_Slide")
}

@section Scripts {
    <script>
        window.onload($("#PopupModal").modal());
    </script>
}

@section PageTitle {
    @*<section class="page-title">
            <div class="container">

                <header>

                    <ul class="breadcrumb">
                        <!-- breadcrumb -->
                        <li><a href="page-empty.html#">Trang Chủ</a></li>
                        <li class="active">Trang hiện tại</li>
                    </ul><!-- /breadcrumb -->

                    <h2>
                        <!-- Page Title -->
                        Trang <strong>Hiện Tại</strong>
                    </h2><!-- /Page Title -->

                </header>

            </div>
        </section>*@
}

<!-- FEATURED PRODUCTS -->
<h2 class="owl-featured"><strong>Sản Phẩm</strong> Nổi Bật</h2>
<div class="owl-carousel featured" data-plugin-options='{"singleItem": false, "stopOnHover":false, "autoPlay":true, "autoHeight": false, "navigation": true, "pagination": false}'>
    @foreach (var item in listproduct_hightlights)
    {
        <div>
            <div class="owl-featured-item">
                <a class="figure" href="@Url.Action("ProductDetail", new { PRODUCT_CD = item.PRODUCT_CD })">
                    <span><i class="fa fa-plus"></i></span>
                    <img class="" alt="" src="@Url.Content("~/Content")/images/products/@item.O_PRODUCT.URL_IMAGE" width="230" />
                </a>
                <div class="owl-featured-detail">
                    <a class="featured-title" href="@Url.Action("ProductDetail", new { PRODUCT_CD = item.PRODUCT_CD })">@item.O_PRODUCT.PRODUCT_NAME</a>
                    <span class="price"><span class="line-through styleColor">@String.Format("{0:0,0 " + item.O_PRODUCT.CURRENCY + "}", item.O_PRODUCT.PRICE)</span> <strong>@String.Format("{0:0,0 " + item.O_PRODUCT.CURRENCY + "}", item.O_PRODUCT.PRICE_PROMOTION)</strong></span>
                    <a href="shop-page-cart_2.html" class="btn btn-primary btn-sm"><i class="fa fa-shopping-cart"></i> THÊM VÀO GIỎ HÀNG</a>
                </div>
                @if (item.O_PRODUCT.O_PRODUCT_NEW != null && item.O_PRODUCT.O_PRODUCT_NEW.ToList().Count > 0)
                { 
                <div class="sb-gdv-disc">
                    <div class="sb-gdv-disc__content">Mới</div>
                </div>
                }
            </div>
        </div>

    }
</div>
<!-- /FEATURED PRODUCTS -->

<div class="divider">
    <!-- divider -->
    <i class="fa fa-star"></i>
</div>

<!-- FEATURED PRODUCTS -->
<h2 class="owl-featured"><strong>Sản Phẩm</strong> Bán Chạy</h2>
<div class="owl-carousel featured" data-plugin-options='{"singleItem": false, "stopOnHover":false, "autoPlay":true, "autoHeight": false, "navigation": true, "pagination": false}'>
@foreach (var item in listproduct_selling)
{
    <div>
        <div class="owl-featured-item">
            <a class="figure" href="@Url.Action("ProductDetail", new { PRODUCT_CD = item.PRODUCT_CD })">
                <span><i class="fa fa-plus"></i></span>
                <img class="" alt="" src="@Url.Content("~/Content")/images/products/@item.O_PRODUCT.URL_IMAGE" width="230" />
            </a>
            <div class="owl-featured-detail">
                <a class="featured-title" href="@Url.Action("ProductDetail", new { PRODUCT_CD = item.PRODUCT_CD })">@item.O_PRODUCT.PRODUCT_NAME</a>
                <span class="price"><span class="line-through styleColor">@String.Format("{0:0,0 " + item.O_PRODUCT.CURRENCY + "}", item.O_PRODUCT.PRICE)</span> <strong>@String.Format("{0:0,0 " + item.O_PRODUCT.CURRENCY + "}", item.O_PRODUCT.PRICE_PROMOTION)</strong></span>
                <a href="shop-page-cart_2.html" class="btn btn-primary btn-sm"><i class="fa fa-shopping-cart"></i> THÊM VÀO GIỎ HÀNG</a>
            </div>
            @if (item.O_PRODUCT.O_PRODUCT_NEW != null && item.O_PRODUCT.O_PRODUCT_NEW.ToList().Count > 0)
            {
                <div class="sb-gdv-disc">
                    <div class="sb-gdv-disc__content">Mới</div>
                </div>
            }
        </div>
    </div>

}
</div>
<!-- /FEATURED PRODUCTS -->

<div class="divider">
    <!-- divider -->
    <i class="fa fa-star"></i>
</div>

<!-- PRODUCT LIST -->
<div class="row margin-top60">

    <div class="col-md-3">

        <!-- SIDE NAV -->
        <ul class="side-nav list-group" id="sidebar-nav">
            @foreach (var item in listcategory)
            {
                <li class="list-group-item list-toggle">
                    <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-@item.CATEGORY_PRODUCT_CODE">@item.CATEGORY_PRODUCT_NAME</a>
                    @if (item.O_CATEGORY_PRODUCT_DETAIL != null && item.O_CATEGORY_PRODUCT_DETAIL.ToList().Count > 0)
                    {
                        <ul id="collapse-@item.CATEGORY_PRODUCT_CODE" class="collapse">
                            @foreach (var item_detail in item.O_CATEGORY_PRODUCT_DETAIL)
                            {
                                <li><a href="@Url.Action("Product_Category_Detail", new { CATEGORY_PRODUCT_DETAIL_CD = item_detail.CATEGORY_PRODUCT_DETAIL_CD })"><i class="fa fa-angle-right"></i> @item_detail.CATEGORY_PRODUCT_DETAIL_NAME</a></li>
                            }
                        </ul>
                    }
                </li>
            }


        </ul>
        <!-- /SIDE NAV -->
        <!-- BANNER -->
        <hr class="half-margins invisible" />

        <a class="hidden-sm" href="../../../wrapbootstrap.com/theme/epona-responsive-website-template-WB0464P7N.htm" rel="nofollow" target="_blank">
            <img class="img-responsive" src="@Url.Content("~/Content")/images/shop_banner.png" alt="" />
        </a>
        <!-- /BANNER -->
        <!-- FACEBOOK -->

    </div>

    <div class="col-md-9">

        <!-- PRODUCT LIST -->
        <div id="ProductList" class="row scroll">

            @foreach (var item in listproduct)
            {
                     <div class="col-md-4 col-sm-4">
                <!-- item -->
                <a class="shop-item-list" href="@Url.Action("ProductDetail",new { PRODUCT_CD = item.PRODUCT_CD })">
                    <figure>
                        <!-- image -->
                        <img class="img-responsive" src="@Url.Content("~/Content")/images/products/@item.URL_IMAGE" alt="@item.TAG_ALT" />
                    </figure><!-- /image -->
                    @if(item.QUANTITY <= 0)
                    {
                        <span class="shop-stock-info stock-no">
                        <!-- stock -->
                        <i class="fa fa-times"></i> hết hàng
                    </span><!-- /stock -->
                    
                    }
                    else
                    {
                    <span class="shop-stock-info stock-yes">
                        <!-- stock -->
                        <i class="fa fa-check"></i> còn hàng
                    </span><!-- /stock -->
                        
                    }
                    <div class="product-info">
                        <!-- title and price -->
                        <h2>
                            <span class="product-name">@item.PRODUCT_NAME</span>
                            <span class="bold">@String.Format("{0:0,0 " + item.CURRENCY + "}", item.PRICE_PROMOTION)</span> <span class="line-through">@String.Format("{0:0,0 " + item.CURRENCY + "}", item.PRICE)</span>
                        </h2>
                    </div><!-- /title and price -->
                    @if (item.O_PRODUCT_NEW != null && item.O_PRODUCT_NEW.ToList().Count > 0)
                    {
                        <div class="sb-gdv-disc">
                            <div class="sb-gdv-disc__content">Mới</div>
                        </div>
                    }
                </a>
            </div><!-- /item -->
            }
            
        </div>
        <!-- /PRODUCT LIST -->
        <!-- PAGINATION -->
        @*<div class="row">

                <div class="col-md-6 text-left">
                    <p class="hidden-xs pull-left nomargin padding20">Hiện 1-16 trên tổng số 38 sản phẩm.</p>
                </div>

                <div class="col-md-6 text-right">
                    <ul class="pagination">
                        <li><a href="#"><i class="fa fa-chevron-left"></i></a></li>
                        <li class="active"><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#"><i class="fa fa-chevron-right"></i></a></li>
                    </ul>
                </div>

            </div>*@
        <!-- /PAGINATION -->

    </div>

</div>
<!-- /PRODUCT LIST -->
